#!/usr/bin/env ruby

# What have I installed recently that I'm not explicitly managing
installed = `brew ls -1`.split("\n")

# Let's exclude things that I know I want and have documented
wanted = `brew bundle list --all --file Brewfile`.split("\n")

# These got installed some how, but I don't care about them.
# exclude them from the report
ignored = [
    'aom',
    'apr',
    'apr-util',
    'argon2',
    'aspell',
    'augeas',
    'autoconf',
    'awscli',
    'berkeley-db',
    'brotli',
    'c-ares',
    'ca-certificates',
    'certbot',
    'cfn-lint',
    'composer',
    'dialog',
    'fontconfig',
    'freetds',
    'freetype',
    'gd',
    'gdbm',
    'gettext',
    'gh',
    'giflib',
    'gmp',
    'gnu-tar',
    'heroku',
    'heroku-node',
    'icu4c',
    'imath',
    'isl',
    'jo',
    'jpeg',
    'jpeg-turbo',
    'jpeg-xl',
    'k3d',
    'krb5',
    'kubernetes-cli',
    'libavif',
    'libcbor',
    'libevent',
    'libfido2',
    'libidn2',
    'libmpc',
    'libnghttp2',
    'libpng',
    'libpq',
    'libsodium',
    'libssh2',
    'libtiff',
    'libtool',
    'libunistring',
    'libuv',
    'libvmaf',
    'libzip',
    'lua',
    'lz4',
    'm4',
    'mpdecimal',
    'mpfr',
    'mysql-client',
    'ncurses',
    'oniguruma',
    'openexr',
    'openldap',
    'openssl@1.1',
    'openssl@3',
    'pcre',
    'pcre2',
    'perl',
    'php',
    'pkg-config',
    'postgresql',
    'procs',
    'python@3.10',
    'python@3.9',
    'readline',
    'ripgrep',
    'rtmpdump',
    'ruby',
    'shellcheck',
    'siege',
    'six',
    'sqlfluff',
    'sqlite',
    'terraform',
    'tidy-html5',
    'unixodbc',
    'watch',
    'webp',
    'xz',
    'zstd',
    'brave-browser',
    'firefox',
    'miniconda',
]

installed.each do |formula|
    next if ignored.include? formula
    next if wanted.include? formula

    puts "'#{formula}',"
end
